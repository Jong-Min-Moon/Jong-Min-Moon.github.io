document.addEventListener("DOMContentLoaded",function(){const t=document.querySelectorAll(".filter-btn"),e=document.querySelectorAll(".grid-item, .card-item"),r=document.querySelector(".grid");t.forEach(s=>{s.addEventListener("click",()=>{t.forEach(t=>t.classList.remove("active")),s.classList.add("active");const i=s.getAttribute("data-filter").trim();if(e.forEach(t=>{const e=t.getAttribute("data-category");let r=[];try{const t=JSON.parse(e);r=Array.isArray(t)?t:String(t).split(",").map(t=>t.trim())}catch(t){if(console.log("JSON parse error for:",e,t),e)try{const t=e.replace(/'/g,'"'),s=JSON.parse(t);r=Array.isArray(s)?s:String(s).split(",").map(t=>t.trim())}catch(t){let s=e.trim();(s.startsWith('"')&&s.endsWith('"')||s.startsWith("'")&&s.endsWith("'"))&&(s=s.slice(1,-1)),r=s.split(",").map(t=>t.trim())}}r=r.map(t=>String(t).trim()),"all"===i||r.includes(i)?(t.closest("li")&&(t.closest("li").style.display=null),t.style.display=null):(t.closest("li")&&(t.closest("li").style.display="none"),t.style.display="none")}),r&&window.Masonry){var l=Masonry.data(r);l&&l.layout()}})})});