<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Paper review: Building Representative Matched Samples With Multi-Valued Treatments in Large Observational Studies | Jongmin Mun</title> <meta name="author" content="Jongmin Mun"> <meta name="description" content="A review of Magdelena Bennett et al. (2020) on using mixed-integer optimization to create representative matched samples for multi-valued treatments."> <meta name="keywords" content="Jongmin Mun, USC"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.4/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="stylesheet" href="/assets/css/main.css?v=1771811036"> <link rel="canonical" href="https://jong-min-moon.github.io/blog/2026/building-representative-matched-samples/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script src="/assets/js/distillpub/template.v2.js"></script> <script src="/assets/js/distillpub/transforms.v2.js"></script> <script src="/assets/js/distillpub/overrides.js"></script> </head> <body> <d-front-matter> <script async type="text/json">{
      "title": "Paper review: Building Representative Matched Samples With Multi-Valued Treatments in Large Observational Studies",
      "description": "A review of Magdelena Bennett et al. (2020) on using mixed-integer optimization to create representative matched samples for multi-valued treatments.",
      "published": "February 22, 2026",
      "authors": [
        {
          "author": "Jong Min Moon",
          "authorURL": "https://github.com/Jong-Min-Moon",
          "affiliations": [
            {
              "name": "USC Marshall",
              "url": ""
            }
          ]
        }
        
      ],
      "katex": {
        "delimiters": [
          {
            "left": "$",
            "right": "$",
            "display": false
          },
          {
            "left": "$$",
            "right": "$$",
            "display": true
          }
        ]
      }
    }</script> </d-front-matter> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Jongmin </span>Mun</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Study</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/coursework/">Coursework</a> </div> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Posts<span class="sr-only">(current)</span></a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="post distill"> <d-title> <h1>Paper review: Building Representative Matched Samples With Multi-Valued Treatments in Large Observational Studies</h1> <p>A review of Magdelena Bennett et al. (2020) on using mixed-integer optimization to create representative matched samples for multi-valued treatments.</p> </d-title> <d-byline></d-byline> <d-article> <d-contents> <nav class="l-text figcaption"> <h3>Contents</h3> <div><a href="#problem-setting">Problem Setting</a></div> <div><a href="#optimization-framework">Optimization Framework</a></div> <div><a href="#key-innovations">Key Innovations</a></div> <div><a href="#computational-efficiency">Computational Efficiency</a></div> </nav> </d-contents> <h2 id="problem-setting">Problem Setting</h2> <p>Without loss of generality, we focus on a single treatment level, as the matching procedure remains identical across all levels.</p> <h3 id="datasets">Datasets</h3> <p>The study involves units (e.g., students) defined by an outcome, a treatment status, and a set of covariates. We consider $P$ <strong>categorical</strong> covariates, $\mathcal{P} = {p_1, \ldots, p_P}$. Note that continuous variables, such as household income, are discretized into categories in this paper.</p> <p>In the paper’s running example, the covariates include categorical variables such as gender, ethnicity, parental education levels, and household income. While each covariate in practice has a distinct number of levels, for ease of exposition we assume that each has exactly $K$ categories. Accordingly, each unit $i$ is represented by a covariate vector, for example, $\mathbf{x}_i \in [K]^P$.</p> <p>The data is organized into two distinct sets:</p> <ol> <li> <strong>Treatment Dataset ($\mathcal{L}$):</strong> Units that received the specific treatment level under study. We denote this set as $\mathcal{L} = {\ell_1, \ldots, \ell_L}$. For example, a unit $\ell_1$ consists of an outcome $y_{ell_1}$, treatment $A_{ell_1}$ and a covariate vector $\mathbf{x}<em>{\ell_1}$. For matching stage, we only care about the covariate vector $\mathbf{x}</em>{\ell_1}$.</li> <li> <strong>Template Dataset ($\mathcal{T}$):</strong> A sample drawn from the population that represents the target covariate distribution. We denote this set as $\mathcal{T} = {t_1, \ldots, t_T}$. Since this dataset is genereated for the matching purpose, we only care about the covariate vector $\mathbf{x}_{t_1}$.</li> </ol> <h3 id="problem-coefficients">Problem Coefficients</h3> <p>For each covariate $p \in {1, \dots, P}$ and category $k \in {1, \dots, K}$, we define:</p> <ul> <li> <strong>$N_{p,k}$:</strong> The number of units in the <strong>template dataset</strong> $\mathcal{T}$ that belong to category $k$ of covariate $p$. These represent our target counts for a representative sample.</li> </ul> <h3 id="decision-variables">Decision Variables</h3> <p>The optimization model uses two types of variables:</p> <ul> <li> <strong>$m_{t,\ell} \in {0, 1}$:</strong> A binary indicator that is $1$ if template unit $t \in \mathcal{T}$ is matched to treated unit $\ell \in \mathcal{L}$, and $0$ otherwise.</li> <li> <strong>$v_{p,k} \geq 0$:</strong> A continuous variable representing the “cell count margin”—the absolute difference between the number of matched treated units and the target count $N_{p,k}$. Our goal is to minimize the sum of these margins.</li> </ul> <h3 id="constraints">Constraints</h3> <p>The core logic of the model is captured in the following constraints:</p> <ol> <li> <p><strong>Count Balance:</strong> This constraint connects the matching decisions ($m$) to the discrepancy margins ($v$): \(| \sum_{\ell \in \mathcal{L}_{p,k}} \left( \sum_{t \in \mathcal{T}} m_{t,\ell} \right) - N_{p,k} | \leq v_{p,k}\) where $\mathcal{L}_{p,k}$ is the subset of treated units possessing category $k$ of covariate $p$.</p> </li> <li> <p><strong>Matching Requirements:</strong> These ensure a valid one-to-one mapping without replacement:</p> <ul> <li>Each treated unit is matched at most once: $\sum_{t \in \mathcal{T}} m_{t,\ell} \leq 1, \quad \forall \ell \in \mathcal{L}$</li> <li>Each template unit is matched exactly once: $\sum_{\ell \in \mathcal{L}} m_{t,\ell} = 1, \quad \forall t \in \mathcal{T}$</li> </ul> </li> </ol> <h3 id="analogy-filling-the-grid">Analogy: Filling the Grid</h3> <p>Imagine a grid of size $P \times K$ where each cell represents a specific covariate category. The template units are already distributed across these cells. The matching process is like “filling” these cells with treated units to mirror the template’s distribution as closely as possible.</p> <pre><code class="language-mermaid">graph TD
    subgraph Grid ["Grid: P Covariates x K Categories"]
        Cell1 ["Cell (1,1): Target N_1,1"]
        Cell2 ["Cell (1,2): Target N_1,2"]
        Cell3 ["..."]
        Cell4 ["Cell (P,K): Target N_P,K"]
    end

    TreatedPool ["Treated Pool (L)"] -- "Matched via m_t,l" --&gt; Grid
    
    style Grid fill:#f9f9f9,stroke:#333,stroke-width:2px
    style TreatedPool fill:#e1f5fe,stroke:#01579b
</code></pre> <p>By minimizing $\sum v_{pk}$, we ensure that the final “population” of matched treated units is a representative reflection of the template.</p> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> <d-bibliography src="/assets/bibliography/"></d-bibliography> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2026 Jongmin Mun. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>